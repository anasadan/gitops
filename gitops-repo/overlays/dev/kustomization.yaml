apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: backend-service-dev

namespace: gitops-demo-dev

namePrefix: dev-

labels:
- pairs:
    environment: dev
    tier: development

resources:
- ../../base
- namespace.yaml

patches:
- path: patch-deployment.yaml
  target:
    kind: Deployment
    name: backend-service

configMapGenerator:
- behavior: replace
  literals:
  - PORT=8080
  - SERVICE_NAME=backend-service
  - ENVIRONMENT=development
  - LOG_LEVEL=debug
  name: backend-service-config

images:
- name: ghcr.io/anasadan/gitops-demo
  newName: ghcr.io/anasadan/gitops-demo
  newTag: latest
